@prefix :       <http://example.org/term/> .
@prefix i:      <http://example.org/inst/> .
@prefix rdf:    <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs:   <http://www.w3.org/2000/01/rdf-schema#> .
@prefix rr:     <http://www.w3.org/ns/r2rml#> .
@prefix xsd:    <http://www.w3.org/2001/XMLSchema#> .


# ==================== 1. District ====================
<#DistrictMapping>
  a rr:TriplesMap ;

  rr:logicalTable [
    rr:sqlQuery """
      SELECT * FROM "district";
  """] ;

  rr:subjectMap [
      a rr:SubjectMap, rr:TermMap;
      rr:template "district/{knr}" ;
      rr:class :District ;
      rr:termType rr:IRI
  ] ;

  rr:predicateObjectMap [
      a rr:PredicateObjectMap ;
      rr:predicate :name;
      rr:objectMap [
          a rr:ObjectMap, rr:TermMap ;
          rr:column "kname" ;
          rr:termType rr:Literal
      ]
  ] ;

  rr:predicateObjectMap [
      a rr:PredicateObjectMap ;
      rr:predicate :area;
      rr:objectMap [
          a rr:ObjectMap, rr:TermMap ;
          rr:column "fixed_geometry" ;
          rr:termType rr:Literal
      ]
  ] .


# ==================== 2. Neighbourhood ====================
<#NeighbourhoodMapping>
  a rr:TriplesMap ;

  rr:logicalTable [
    rr:sqlQuery """
      SELECT * FROM "neighbourhood";
  """] ;

  rr:subjectMap [
      a rr:SubjectMap, rr:TermMap;
      rr:template "neighbourhood/{neighbourhoods}" ;
      rr:class :Neighbourhood ;
      rr:termType rr:IRI
  ] ;

  rr:predicateObjectMap [
      a rr:PredicateObjectMap ;
      rr:predicate :name;
      rr:objectMap [
          a rr:ObjectMap, rr:TermMap ;
          rr:column "neighbourhoods" ;
          rr:termType rr:Literal
      ]
  ] ;

  rr:predicateObjectMap [
      a rr:PredicateObjectMap ;
      rr:predicate :neighbourhoodIn;
      rr:objectMap [
          a rr:ObjectMap, rr:TermMap ;
          rr:template "district/{district}" ;
          rr:termType rr:IRI
      ]
  ] .


# ==================== 3. BusStop ====================
<#BusStopMapping>
  a rr:TriplesMap ;

  rr:logicalTable [
    rr:sqlQuery """
      SELECT * FROM "bus" WHERE linien IS NOT NULL;
  """] ;

  rr:subjectMap [
      a rr:SubjectMap, rr:TermMap;
      rr:template "busstop/{NHSTID}" ;
      rr:class :BusStop ;
      rr:termType rr:IRI
  ] ;

  rr:predicateObjectMap [
      a rr:PredicateObjectMap ;
      rr:predicate :name;
      rr:objectMap [
          a rr:ObjectMap, rr:TermMap ;
          rr:column "CHSTNAME" ;
          rr:termType rr:Literal
      ]
  ] ;

  rr:predicateObjectMap [
      a rr:PredicateObjectMap ;
      rr:predicate :busStopType;
      rr:objectMap [
          a rr:ObjectMap, rr:TermMap ;
          rr:column "VTYP" ;
          rr:termType rr:Literal
      ]
  ] ;

  rr:predicateObjectMap [
      a rr:PredicateObjectMap ;
      rr:predicate :location;
      rr:objectMap [
          a rr:ObjectMap, rr:TermMap ;
          rr:column "fixed_geometry" ;
          rr:termType rr:Literal
      ]
  ] ;

  rr:predicateObjectMap [
      a rr:PredicateObjectMap ;
      rr:predicate :stopsIn;
      rr:objectMap [
          a rr:ObjectMap, rr:TermMap ;
          rr:template "district/{district_id}" ;
          rr:termType rr:IRI
      ]
  ] .


# ==================== 4. BusLine - missing

# ==================== 5. TrainStation
<#TrainStationMapping>
  a rr:TriplesMap ;

  rr:logicalTable [
    rr:sqlQuery """
      SELECT * FROM "train_station"
  """] ;

  rr:subjectMap [
      a rr:SubjectMap, rr:TermMap;
      rr:template "trainstation/{stations_id}" ;
      rr:class :TrainStation ;
      rr:termType rr:IRI
  ] ;

  rr:predicateObjectMap [
      a rr:PredicateObjectMap ;
      rr:predicate :name;
      rr:objectMap [
          a rr:ObjectMap, rr:TermMap ;
          rr:column "stations_name" ;
          rr:termType rr:Literal ;
          rr:datatype xsd:string
      ]
  ] ;

  rr:predicateObjectMap [
      a rr:PredicateObjectMap ;
      rr:predicate :location;
      rr:objectMap [
          a rr:ObjectMap, rr:TermMap ;
          rr:column "stations_geometry" ;
          rr:termType rr:Literal ;
          rr:datatype xsd:string
      ]
  ] ;

  rr:predicateObjectMap [
      a rr:PredicateObjectMap ;
      rr:predicate :stopsIn;
      rr:objectMap [
          a rr:ObjectMap, rr:TermMap ;
          rr:template "district/{stations_district_id}" ;
          rr:termType rr:IRI
      ]
  ] .


# ==================== 6. CarParking ====================
<#CarParkingMapping>
  a rr:TriplesMap ;

  rr:logicalTable [
    rr:sqlQuery """
      SELECT * FROM "car_parking"
  """] ;

  rr:subjectMap [
      a rr:SubjectMap, rr:TermMap;
      rr:template "carparking/{objectid}" ;
      rr:class :CarParking ;
      rr:termType rr:IRI
  ] ;

  rr:predicateObjectMap [
      a rr:PredicateObjectMap ;
      rr:predicate :name;
      rr:objectMap [
          a rr:ObjectMap, rr:TermMap ;
          rr:column "name" ;
          rr:termType rr:Literal ;
          rr:datatype xsd:string
      ]
  ] ;

  rr:predicateObjectMap [
      a rr:PredicateObjectMap ;
      rr:predicate :address;
      rr:objectMap [
          a rr:ObjectMap, rr:TermMap ;
          rr:column "adresse" ;
          rr:termType rr:Literal ;
          rr:datatype xsd:string
      ]
  ] ;

  rr:predicateObjectMap [
      a rr:PredicateObjectMap ;
      rr:predicate :spacesNo;
      rr:objectMap [
          a rr:ObjectMap, rr:TermMap ;
          rr:column "anzahl_oeffentliche_pp" ;
          rr:termType rr:Literal ;
          rr:datatype xsd:positiveInteger
      ]
  ] ;

  rr:predicateObjectMap [
      a rr:PredicateObjectMap ;
      rr:predicate :location;
      rr:objectMap [
          a rr:ObjectMap, rr:TermMap ;
          rr:column "fixed_geometry" ;
          rr:termType rr:Literal ;
          rr:datatype xsd:string
      ]
  ] ;

  rr:predicateObjectMap [
      a rr:PredicateObjectMap ;
      rr:predicate :parkingIn;
      rr:objectMap [
          a rr:ObjectMap, rr:TermMap ;
          rr:template "district/{district_id}" ;
          rr:termType rr:IRI
      ]
  ] .

# ==================== 7. BikeParking ====================
<#BikeParkingMapping>
  a rr:TriplesMap ;

  rr:logicalTable [
    rr:sqlQuery """
      SELECT *,
        (CASE "name"
            WHEN 'Beide' THEN 'both'
            WHEN 'Motorrad' THEN 'motorbike'
            WHEN 'Velo' THEN 'bike'
         END) as "vehicle_type"
      FROM "bike_parking"
  """] ;

  rr:subjectMap [
      a rr:SubjectMap, rr:TermMap;
      rr:template "bikeparking/{poi_id}" ;
      rr:class :BikeParking ;
      rr:termType rr:IRI
  ] ;

  rr:predicateObjectMap [
      a rr:PredicateObjectMap ;
      rr:predicate :spacesNo;
      rr:objectMap [
          a rr:ObjectMap, rr:TermMap ;
          rr:column "anzahl_pp" ;
          rr:termType rr:Literal ;
          rr:datatype xsd:positiveInteger
      ]
  ] ;

  rr:predicateObjectMap [
      a rr:PredicateObjectMap ;
      rr:predicate :vehicleType;
      rr:objectMap [
          a rr:ObjectMap, rr:TermMap ;
          rr:column "vehicle_type" ;
          rr:termType rr:Literal ;
          rr:datatype xsd:string
      ]
  ] ;

  rr:predicateObjectMap [
      a rr:PredicateObjectMap ;
      rr:predicate :location;
      rr:objectMap [
          a rr:ObjectMap, rr:TermMap ;
          rr:column "fixed_geometry" ;
          rr:termType rr:Literal ;
          rr:datatype xsd:string
      ]
  ] ;

  rr:predicateObjectMap [
      a rr:PredicateObjectMap ;
      rr:predicate :parkingIn;
      rr:objectMap [
          a rr:ObjectMap, rr:TermMap ;
          rr:template "district/{district_id}" ;
          rr:termType rr:IRI
      ]
  ] .
